{"ast":null,"code":"var _jsxFileName = \"E:\\\\Web Development\\\\LCO MERN Bootcamp\\\\EcommerceWebsite\\\\Frontendd\\\\src\\\\admin\\\\UpdateCategory.js\";\nimport React, { useState, useEffect } from 'react';\nimport Base from '../core/Base';\nimport { Link } from 'react-router-dom';\nimport { isAuthenticated } from '../auth/helper';\nimport { updateCategory, getCategory } from './helper/adminapicall';\n\nconst UpdateCategory = ({\n  match\n}) => {\n  //    const [name,setName]= useState();\n  //    const[error,setError]= useState(false)\n  //    const[success,setSuccess]= useState(false);\n  const [values, setValues] = useState({\n    name: \"\",\n    error: false,\n    success: false,\n    formData: \"\"\n  });\n  const {\n    name,\n    error,\n    success\n  } = values;\n  const {\n    user,\n    token\n  } = isAuthenticated();\n\n  const preLoad = categoryId => {\n    getCategory(categoryId).then(data => {\n      if (data.err) {\n        setValues({ ...values,\n          error: data.err\n        });\n      } else {\n        console.log(name);\n        setValues({ ...values,\n          name: data.name,\n          formData: new FormData()\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    preLoad(match.params.categoryId);\n  }, []);\n\n  const handleChange = name => event => {\n    //  setError(\"\")\n    //  setName(event.target.value)\n    setValues({\n      name: event.target.value,\n      error: \"\"\n    });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault(); //    setError(\"\");\n    //    setSuccess(false);\n    //     setValues({...values,success: false, error:\"\"})\n\n    console.log(name);\n    updateCategory(match.params.categoryId, user._id, token, {\n      name\n    }).then(data => {\n      console.log(data);\n\n      if (data.err) {\n        setValues({\n          error: data.err\n        });\n      } else {\n        //   setError(\"\")\n        //   setSuccess(true)\n        //   setName(\"\")\n        setValues({\n          name: \"\",\n          error: \"\",\n          success: true\n        });\n      }\n    });\n  }; //   const onSubmit = event => {\n  //     event.preventDefault();\n  //     setError(\"\");\n  //     setSuccess(false);\n  //     //backend request fired\n  //     createCategory(user._id, token, { name }).then(data => {\n  //       if (data.error) {\n  //         setError(true);\n  //       } else {\n  //         setError(\"\");\n  //         setSuccess(true);\n  //         setName(\"\");\n  //       }\n  //     });\n  // }    \n\n\n  const goBack = () => React.createElement(\"div\", {\n    className: \"mt-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"btn btn-sm btn-success mb-3\",\n    to: \"/admin/dashboard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Admin Home\"));\n\n  const successMessage = () => {\n    if (success) {\n      return React.createElement(\"h4\", {\n        className: \"text-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Category Created Successfully\");\n    }\n  };\n\n  const warningMessage = () => {\n    if (error) {\n      return React.createElement(\"h4\", {\n        className: \"text-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Category Failed to Create\");\n    }\n  };\n\n  const myCategoryForm = () => React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"fom-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"lead\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Enter the category \"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control my-2\",\n    autofocus: true,\n    required: true,\n    placeholder: \"Ex Summer t-shirts\",\n    onChange: handleChange(\"name\"),\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"btn btn-outline-info mb-2 \",\n    onClick: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \" Update Category\")));\n\n  return React.createElement(Base, {\n    title: \"Add Category Here\",\n    description: \"Here You can add T-shirts category\",\n    className: \"container bg-info p-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row bg-white rounded\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, successMessage(), warningMessage(), myCategoryForm(), goBack())));\n};\n\nexport default UpdateCategory;","map":{"version":3,"sources":["E:/Web Development/LCO MERN Bootcamp/EcommerceWebsite/Frontendd/src/admin/UpdateCategory.js"],"names":["React","useState","useEffect","Base","Link","isAuthenticated","updateCategory","getCategory","UpdateCategory","match","values","setValues","name","error","success","formData","user","token","preLoad","categoryId","then","data","err","console","log","FormData","params","handleChange","event","target","value","onSubmit","preventDefault","_id","goBack","successMessage","warningMessage","myCategoryForm"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react';\r\nimport Base from '../core/Base'\r\nimport {Link} from 'react-router-dom'\r\nimport { isAuthenticated }  from '../auth/helper';\r\nimport {updateCategory,getCategory } from './helper/adminapicall'\r\n\r\n\r\nconst UpdateCategory = ({match}) => {\r\n//    const [name,setName]= useState();\r\n//    const[error,setError]= useState(false)\r\n//    const[success,setSuccess]= useState(false);\r\n\r\n   const [values,setValues]=useState({\r\n       name:\"\",\r\n       error:false,\r\n       success:false,\r\n       formData: \"\"\r\n   })\r\n\r\n   const {name,error,success} = values\r\n\r\n   const {user,token}= isAuthenticated();\r\n\r\n   const preLoad = categoryId =>{\r\n    getCategory(categoryId).then(data =>{\r\n        if(data.err){\r\n            setValues({...values, error:data.err})\r\n        }else{\r\n            console.log(name)\r\n            setValues({...values, name:data.name, formData: new FormData()} )\r\n            \r\n        }\r\n    })\r\n}\r\n\r\nuseEffect(()=>{\r\n    preLoad(match.params.categoryId)\r\n}, [])\r\n\r\n   const handleChange = name =>event =>{\r\n    \r\n        //  setError(\"\")\r\n        //  setName(event.target.value)\r\n         setValues({name: event.target.value, error:\"\"})\r\n    \r\n   };\r\n\r\n   const onSubmit = (event) =>{\r\n       event.preventDefault();\r\n    //    setError(\"\");\r\n    //    setSuccess(false);\r\n  //     setValues({...values,success: false, error:\"\"})\r\n    console.log(name)\r\n    updateCategory(match.params.categoryId,user._id,token,{name})\r\n    .then(data =>{\r\n          console.log(data)\r\n          if(data.err){\r\n            setValues({ error:data.err})\r\n          }else{\r\n            //   setError(\"\")\r\n            //   setSuccess(true)\r\n            //   setName(\"\")\r\n              setValues({name: \"\", error:\"\", success: true})\r\n          }\r\n      }) \r\n\r\n    }\r\n    //   const onSubmit = event => {\r\n    //     event.preventDefault();\r\n    //     setError(\"\");\r\n    //     setSuccess(false);\r\n    \r\n    //     //backend request fired\r\n    //     createCategory(user._id, token, { name }).then(data => {\r\n    //       if (data.error) {\r\n    //         setError(true);\r\n    //       } else {\r\n    //         setError(\"\");\r\n    //         setSuccess(true);\r\n    //         setName(\"\");\r\n    //       }\r\n    //     });\r\n    // }    \r\n  \r\n\r\n\r\n\r\n\r\n    const goBack=()=>(\r\n        <div className=\"mt-5\">\r\n            <Link className=\"btn btn-sm btn-success mb-3\" to=\"/admin/dashboard\" >Admin Home</Link>\r\n        </div>\r\n    )\r\n    const successMessage=()=>{\r\n              if(success){\r\n                  return(\r\n                      <h4 className=\"text-success\">Category Created Successfully</h4>\r\n                  )\r\n              }\r\n    }\r\nconst warningMessage=()=>{\r\n         if(error){\r\n             return(\r\n                <h4 className=\"text-success\">Category Failed to Create</h4>\r\n             )\r\n         }\r\n        \r\n    }\r\n   const myCategoryForm = () =>(\r\n   <form>\r\n       <div className=\"fom-group\">\r\n           <p className=\"lead\">Enter the category </p>\r\n           <input type=\"text\" className=\"form-control my-2\" \r\n           autofocus required \r\n           placeholder=\"Ex Summer t-shirts\"\r\n           onChange={handleChange(\"name\")}\r\n           value={name}\r\n            />\r\n           <button className=\"btn btn-outline-info mb-2 \"\r\n             onClick={ onSubmit} > Update Category</button>\r\n       </div>\r\n   </form>\r\n   )\r\n\r\n    return (\r\n        <Base \r\n        title=\"Add Category Here\" \r\n        description=\"Here You can add T-shirts category\"\r\n        className=\"container bg-info p-4\">\r\n            <div className=\"row bg-white rounded\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {successMessage()}\r\n                    {warningMessage()}\r\n                    {myCategoryForm()}\r\n                    {goBack()}\r\n                </div>\r\n            </div>\r\n        </Base>\r\n    );\r\n}\r\n\r\nexport default UpdateCategory;\r\n"]},"metadata":{},"sourceType":"module"}