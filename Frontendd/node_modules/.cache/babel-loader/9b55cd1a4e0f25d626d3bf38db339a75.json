{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adity\\\\backend\\\\EcommerceWebsite\\\\Frontendd\\\\src\\\\core\\\\StripeCheckout.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { isAuthenticated } from '../auth/helper';\nimport { cartEmpty, loadCart } from './helper/cartHelper';\nimport StripeCheckoutButton from \"react-stripe-checkout\";\nimport { API } from '../backend';\nimport { createOrder } from './helper/orderHelper';\n\nconst StripeCheckout = ({\n  products,\n  setReload = f => f,\n  reload = undefined\n}) => {\n  const [data, setData] = useState({\n    loading: false,\n    success: false,\n    error: \"\",\n    address: \"\"\n  });\n  const token = isAuthenticated() && isAuthenticated().token;\n\n  const userId = isAuthenticated() && isAuthenticated().user._id;\n\n  const getFinalAmount = () => {\n    let amount = 0;\n    products.map(p => {\n      amount = amount + p.price;\n    });\n    return amount;\n  };\n\n  const makePayment = token => {\n    const body = {\n      token,\n      products\n    };\n    const headers = {\n      \"Content-Type\": \"Application/json\"\n    };\n    return fetch(`${API}/stripepayment`, {\n      method: \"POST\",\n      headers,\n      body: JSON.stringify(body)\n    }).then(response => {\n      console.log(response);\n    }).catch(error => console.log(error));\n  };\n\n  const showStripeButton = () => {\n    return isAuthenticated() ? React.createElement(StripeCheckoutButton, {\n      stripeKey: \"pk_test_51HjK5EEXntxgqIuJW5qFZrqSBIbtDMy1m7m4J0P33ERlVIVJripdV5BznuVx4vu8aj9DZPwTysFkeJAxlO97LSep00VBKkckTE\",\n      token: makePayment,\n      amount: getFinalAmount() * 100,\n      shippingAddress: true,\n      billingAddress: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Pay with Stripe\")) : React.createElement(Link, {\n      to: \"signin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Signin\"));\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"text-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"StripCheckout \", getFinalAmount()), showStripeButton());\n};\n\nexport default StripeCheckout;","map":{"version":3,"sources":["C:/Users/adity/backend/EcommerceWebsite/Frontendd/src/core/StripeCheckout.js"],"names":["React","useState","useEffect","Link","isAuthenticated","cartEmpty","loadCart","StripeCheckoutButton","API","createOrder","StripeCheckout","products","setReload","f","reload","undefined","data","setData","loading","success","error","address","token","userId","user","_id","getFinalAmount","amount","map","p","price","makePayment","body","headers","fetch","method","JSON","stringify","then","response","console","log","catch","showStripeButton"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAwBC,SAAxB,QAAwC,OAAxC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAAQC,eAAR,QAA8B,gBAA9B;AACA,SAAQC,SAAR,EAAkBC,QAAlB,QAAkC,qBAAlC;AACA,OAAOC,oBAAP,MAAiC,uBAAjC;AACA,SAASC,GAAT,QAAoB,YAApB;AACA,SAASC,WAAT,QAA4B,sBAA5B;;AAIA,MAAMC,cAAc,GAAG,CACnB;AAACC,EAAAA,QAAD;AACAC,EAAAA,SAAS,GAAGC,CAAC,IAAIA,CADjB;AAEAC,EAAAA,MAAM,GAAGC;AAFT,CADmB,KAKlB;AAEA,QAAM,CAACC,IAAD,EAAMC,OAAN,IAAiBhB,QAAQ,CAAC;AAC5BiB,IAAAA,OAAO,EAAC,KADoB;AAE5BC,IAAAA,OAAO,EAAC,KAFoB;AAG5BC,IAAAA,KAAK,EAAC,EAHsB;AAI5BC,IAAAA,OAAO,EAAC;AAJoB,GAAD,CAA/B;AAQA,QAAMC,KAAK,GAAGlB,eAAe,MAAMA,eAAe,GAAGkB,KAArD;;AACA,QAAMC,MAAM,GAAGnB,eAAe,MAAMA,eAAe,GAAGoB,IAAlB,CAAuBC,GAA3D;;AAEA,QAAMC,cAAc,GAAG,MAAK;AACxB,QAAIC,MAAM,GAAG,CAAb;AACAhB,IAAAA,QAAQ,CAACiB,GAAT,CAAaC,CAAC,IAAI;AACdF,MAAAA,MAAM,GAAGA,MAAM,GAAGE,CAAC,CAACC,KAApB;AACH,KAFD;AAGA,WAAOH,MAAP;AACH,GAND;;AAOC,QAAMI,WAAW,GAAGT,KAAK,IAAG;AACxB,UAAMU,IAAI,GAAC;AACPV,MAAAA,KADO;AAEPX,MAAAA;AAFO,KAAX;AAIA,UAAMsB,OAAO,GAAE;AACX,sBAAe;AADJ,KAAf;AAGA,WAAOC,KAAK,CAAE,GAAE1B,GAAI,gBAAR,EAAwB;AAChC2B,MAAAA,MAAM,EAAC,MADyB;AAEhCF,MAAAA,OAFgC;AAGhCD,MAAAA,IAAI,EAACI,IAAI,CAACC,SAAL,CAAeL,IAAf;AAH2B,KAAxB,CAAL,CAIJM,IAJI,CAICC,QAAQ,IAAE;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AAEH,KAPM,EAOJG,KAPI,CAOEtB,KAAK,IAAEoB,OAAO,CAACC,GAAR,CAAYrB,KAAZ,CAPT,CAAP;AAQH,GAhBD;;AAkBD,QAAMuB,gBAAgB,GAAG,MAAK;AAC3B,WAAOvC,eAAe,KAIlB,oBAAC,oBAAD;AACA,MAAA,SAAS,EAAC,6GADV;AAEA,MAAA,KAAK,EAAE2B,WAFP;AAGA,MAAA,MAAM,EAAEL,cAAc,KAAK,GAH3B;AAIA,MAAA,eAAe,MAJf;AAKA,MAAA,cAAc,MALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASA;AAAQ,MAAA,SAAS,EAAE,iBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBATA,CAJkB,GAiBlB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAjBJ;AAqBF,GAtBD;;AAwBD,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA0CA,cAAc,EAAxD,CADJ,EAEKiB,gBAAgB,EAFrB,CADJ;AAMH,CAzED;;AA2EA,eAAejC,cAAf","sourcesContent":["import React ,{useState,useEffect }from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {isAuthenticated} from '../auth/helper';\r\nimport {cartEmpty,loadCart } from './helper/cartHelper';\r\nimport StripeCheckoutButton from \"react-stripe-checkout\"\r\nimport { API } from '../backend';\r\nimport { createOrder } from './helper/orderHelper';\r\n\r\n\r\n\r\nconst StripeCheckout = (\r\n    {products,\r\n    setReload = f => f,\r\n    reload = undefined\r\n    }\r\n) => {\r\n  \r\n     const [data,setData] = useState({\r\n         loading:false,\r\n         success:false,\r\n         error:\"\",\r\n         address:\"\"\r\n\r\n     });\r\n\r\n     const token = isAuthenticated() && isAuthenticated().token \r\n     const userId = isAuthenticated() && isAuthenticated().user._id\r\n\r\n     const getFinalAmount = () =>{\r\n         let amount = 0\r\n         products.map(p => {\r\n             amount = amount + p.price\r\n         })\r\n         return amount\r\n     }\r\n      const makePayment = token =>{\r\n          const body={\r\n              token,\r\n              products\r\n          }\r\n          const headers ={\r\n              \"Content-Type\":\"Application/json\"\r\n          }\r\n          return fetch(`${API}/stripepayment`,{\r\n              method:\"POST\",\r\n              headers,\r\n              body:JSON.stringify(body)\r\n          }).then(response=>{\r\n              console.log(response)\r\n\r\n          }).catch(error=>console.log(error))\r\n      }\r\n\r\n     const showStripeButton = () =>{\r\n        return isAuthenticated() ? (\r\n\r\n\r\n\r\n            <StripeCheckoutButton\r\n            stripeKey=\"pk_test_51HjK5EEXntxgqIuJW5qFZrqSBIbtDMy1m7m4J0P33ERlVIVJripdV5BznuVx4vu8aj9DZPwTysFkeJAxlO97LSep00VBKkckTE\"\r\n            token={makePayment}\r\n            amount={getFinalAmount() * 100 }\r\n            shippingAddress\r\n            billingAddress\r\n            \r\n            >\r\n\r\n            <button className= \"btn btn-success\">Pay with Stripe</button>\r\n\r\n            </StripeCheckoutButton>\r\n        ) : (\r\n            <Link to=\"signin\">\r\n                <button className=\"btn btn-warning\">Signin</button>\r\n            </Link>\r\n        )   \r\n     }\r\n\r\n    return (\r\n        <div>\r\n            <h3 className=\"text-white\">StripCheckout {getFinalAmount()}</h3>\r\n            {showStripeButton()}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default StripeCheckout;\r\n"]},"metadata":{},"sourceType":"module"}